<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FISH ＜＞＜ COMMUNITY - VRChat Colors, Roboto Font, Readability Optimized</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- START OF PROVIDED style.css CONTENT (with modifications) --- */

        /* --- Base Styles --- */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px 0;
            overflow-x: hidden;
            line-height: 1.7;
        }

        .container {
            width: 90%;
            max-width: 850px;
            margin: 40px auto;
            padding: 20px;
            background-color: #1e1e1e;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            text-align: left;
            overflow: hidden;
            position: relative;
        }
        @media (min-width: 600px) {
            .container {
                width: 80%;
                padding: 40px;
            }
        }

        h1, h2, h3 {
            font-weight: bold;
            text-align: left;
        }

        /* Gradient Animation for H1 and H2 */
        h1, h2 {
            --gradient-angle: 120deg;
            background: linear-gradient(
                var(--gradient-angle),
                #00bcd4, #ff4081, #4caf50, #ffc107, #00bcd4
            );
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 8s ease infinite;
            font-weight: bold;
            text-align: left;
        }
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1 {
            font-size: 2.4em; letter-spacing: -0.02em; margin-bottom: 30px;
        }
         @media (min-width: 600px) { h1 { font-size: 2.8em; margin-bottom: 35px; } }

        h2 {
            font-size: 1.8em; margin-top: 40px; margin-bottom: 20px;
        }
        @media (min-width: 600px) { h2 { font-size: 2em; margin-top: 50px; margin-bottom: 25px; } }

        h3 {
            font-size: 1.3em; margin-top: 30px; margin-bottom: 15px; color: #bbbbbb;
        }
        @media (min-width: 600px) { h3 { font-size: 1.4em; margin-top: 35px; } }

        p, ul, ol {
            font-size: 1.05em; line-height: 1.7; margin-bottom: 20px; color: #d0d0d0;
        }
        @media (min-width: 600px) { p, ul, ol { font-size: 1.15em; line-height: 1.8; margin-bottom: 25px; } }

        /* General Lists */
        ul, ol { padding-left: 30px; }
        @media (min-width: 600px) { ul, ol { padding-left: 35px; } }

        /* General List Items */
        li { margin-bottom: 15px; /* Increased spacing slightly */ }
         @media (min-width: 600px) { li { margin-bottom: 18px; } }

        a { color: #4dd0e1; text-decoration: underline; transition: color 0.2s ease; }
        a:hover { color: #00e5ff; }

        .warning { color: #ffc107; font-weight: bold; }

        hr { border: 0; border-top: 1px solid #4dd0e1; margin: 40px 0; }
        @media (min-width: 600px) { hr { margin: 50px 0; } }

        .fish-animation {
            white-space: nowrap; font-size: 3em; color: #4dd0e1; display: block;
            animation: fishSwim 15s linear infinite; width: 100%; overflow: hidden;
            box-sizing: border-box; margin-bottom: 30px; text-align: left; padding-left: 100%;
        }
        @media (min-width: 600px) {
            .fish-animation { font-size: 4em; display: inline-block; width: auto; margin-bottom: 40px; padding-left: 100%; }
        }
        @keyframes fishSwim { 0% { transform: translateX(0); } 100% { transform: translateX(-200%); } }
        .fish-symbol { display: inline-block; color: #4dd0e1; }
        .fish-symbol:nth-child(5n+1) { animation-delay: 0s; }
        .fish-symbol:nth-child(5n+2) { animation-delay: 0.2s; }
        .fish-symbol:nth-child(5n+3) { animation-delay: 0.4s; }
        .fish-symbol:nth-child(5n+4) { animation-delay: 0.6s; }
        .fish-symbol:nth-child(5n+5) { animation-delay: 0.8s; }

        /* Image Scaling Base */
        .community-image, .meaning-image, .verified-image {
            max-width: 100%; /* Never wider than container */
            height: auto; /* Maintain aspect ratio */
            display: block; /* Remove extra space below image */
            margin: 20px auto; /* Center block images */
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        /* Specific Max Widths (Upper limit) */
        .meaning-image {
            max-width: 600px; /* Allow larger on wide screens, but still responsive */
            margin-top: 30px;
            margin-bottom: 30px;
        }
         @media (max-width: 767px) { .meaning-image { max-width: 90%; } } /* Slightly smaller than full width on medium screens */

        .verified-image { /* Style for Verified, Certified, Rose, Luxury logos */
             max-width: 420px; /* Max size on large screens */
        }
         @media (max-width: 599px) { .verified-image { max-width: 300px; } } /* Smaller max on small screens */

        .community-image { /* Style for Daily VRChat logo */
             max-width: 300px;
        }


        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 20px 0; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 5px; }

        /* Theme Styles */
        .fish-verified-theme p, .fish-verified-theme li, .fish-verified-theme h3, .fish-verified-theme ol { color: #FFFFFF; }
        .fish-verified-theme a { color: #A7D8FF; }
        .fish-verified-theme a:hover { color: #D0EFFF; }
        .fish-verified-theme h3 { color: #F0F0F0 !important; } /* Use !important cautiously */
        .fish-verified-theme ol li::marker { color: #FFFFFF; }

        /* Styles for Verified & Certified Community List Items */
        #fish-verified-list,
        #fish-certified-list { list-style: none; padding-left: 0; /* Remove default bullet */ }

        #fish-verified-list li,
        #fish-certified-list li {
            display: flex;          /* Enable flexbox */
            align-items: center;    /* Vertically align items */
            margin-bottom: 25px;    /* Increased Space between items */
            border-bottom: 1px solid #333337; /* Add a subtle separator */
            padding-bottom: 15px;   /* Space above the separator */
        }
        #fish-verified-list li:last-child,
        #fish-certified-list li:last-child {
             border-bottom: none; /* Remove border from last item */
             margin-bottom: 0;
             padding-bottom: 0;
        }
        .community-logo { /* Applied only to verified via JS */
            width: 50px;            /* Slightly larger Logo size */
            height: 50px;           /* Slightly larger Logo size */
            object-fit: contain;    /* Ensure logo fits without distortion */
            margin-right: 20px;     /* More Space between logo and text */
            flex-shrink: 0;         /* Prevent logo from shrinking */
            border-radius: 4px;     /* Slightly rounded corners for logos */
        }
        #fish-verified-list li > div,
        #fish-certified-list li > div { /* Target the div containing the text */
             flex-grow: 1; /* Allow text to take remaining space */
             line-height: 1.5; /* Adjust line height for readability */
        }
         #fish-verified-list li > div b,
         #fish-certified-list li > div b { /* Make the name stand out more */
             font-size: 1.1em;
             display: block; /* Put name on its own line */
             margin-bottom: 5px;
         }
         #fish-verified-list li > div span,
         #fish-certified-list li > div span { /* Style for description/owner line */
             display: block;
             margin-bottom: 8px;
             font-size: 0.95em;
             color: #bdbdbd; /* Slightly dimmer color for description - default */
         }
         #fish-verified-list li > div a,
         #fish-certified-list li > div a { /* Link styling */
             display: inline-block; /* Keep links inline but allow margin */
             margin-right: 15px;
             margin-top: 5px;
             font-size: 0.9em;
         }
         /* Theme specific adjustments for certified list items */
         .fish-certified-theme #fish-certified-list li > div span {
              color: #aaa; /* Dimmer description for certified */
         }
         .fish-certified-theme #fish-certified-list li > div a {
             color: #8bc34a; /* Certified link color */
         }
         .fish-certified-theme #fish-certified-list li > div a:hover {
             color: #aed581; /* Certified link hover color */
         }

        /* Placeholder Style for Certified Theme */
        .fish-certified-theme { /* Basic styling, can be expanded */
            /* filter: brightness(0.9); */ /* Example: Slightly darker */
        }
        .fish-certified-theme p, .fish-certified-theme li, .fish-certified-theme h3, .fish-certified-theme ol { color: #cccccc; } /* Example: Dimmer text */
        .fish-certified-theme a { color: #8bc34a; } /* Example: Different link color */
        .fish-certified-theme a:hover { color: #aed581; }
        .fish-certified-theme h3 { color: #e0e0e0 !important; }


        .luxury-trash-theme p, .luxury-trash-theme li, .luxury-trash-theme h3 { color: #FFD700; }
        .luxury-trash-theme a { color: #FFEC8B; }
        .luxury-trash-theme a:hover { color: #FFFACD; }
        .luxury-trash-theme h3 { color: #FBC02D !important; } /* Use !important cautiously */
        .luxury-trash-theme p i { color: #FFEA00; } /* Style for italic text in luxury trash */
        /* Ensure list items in luxury trash have correct color */
        .luxury-trash-theme ul li { color: #FFD700; }


        .rose-fish-theme p, .rose-fish-theme li, .rose-fish-theme h3, .rose-fish-theme ol { color: #FF6B6B; }
        .rose-fish-theme a { color: #FF8F8F; }
        .rose-fish-theme a:hover { color: #FFBDBD; }
        .rose-fish-theme h3 { color: #E57373 !important; } /* Use !important cautiously */
        .rose-fish-theme ol li::marker { color: #FF6B6B; }

        /* Generic section styling for Avatars/Worlds lists */
        .generic-data-theme p, .generic-data-theme li, .generic-data-theme h3, .generic-data-theme ol { color: #d0d0d0; }
        .generic-data-theme a { color: #4dd0e1; }
        .generic-data-theme a:hover { color: #00e5ff; }
        .generic-data-theme h3 { color: #bbbbbb !important; }
        #fish-worlds-list, #fish-avatars-list { list-style: none; padding-left: 0; }
        #fish-worlds-list li, #fish-avatars-list li {
             border-bottom: 1px solid #333337;
             padding-bottom: 10px;
             margin-bottom: 10px;
             line-height: 1.5;
        }
        #fish-worlds-list li:last-child, #fish-avatars-list li:last-child {
            border-bottom: none; margin-bottom: 0; padding-bottom: 0;
        }
         #fish-worlds-list li b, #fish-avatars-list li b { font-size: 1.05em; }
         /* Style for error messages in lists */
        .error-message i {
            color: #ff6b6b; /* Red color for emphasis */
            font-style: normal; /* Override default italic for <i> if needed */
        }


        /* === CALENDAR STYLES ===================== */

        :root {
            --cal-bg-color: #1a1a1e;
            --cal-header-bg: #222226;
            --cal-border-color: #333337;
            --cal-text-color: #e0e0e0;
            --cal-dim-text-color: #777;

            /* Pink Primary, Blue Secondary */
            --cal-primary-color: #FF69B4;
            --cal-secondary-color: #00BFFF;

            --cal-today-border: var(--cal-primary-color);
            --cal-event-color: var(--cal-secondary-color);
            --cal-event-num-color: #b0c4de; /* Used for ordinal event number */

            --cal-button-bg: var(--cal-primary-color);
            --cal-button-text: #111;
            --cal-button-hover-bg: #ff4fa4;
            --cal-today-button-bg: var(--cal-secondary-color);
            --cal-today-button-hover-bg: #009acd;
        }

        .calendar-container {
            background-color: var(--cal-bg-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 30px;
            margin-bottom: 10px; /* Space between calendar and first timer */
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--cal-border-color);
        }
        @media (min-width: 600px) { .calendar-container { padding: 20px; } }

        .calendar-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 10px 5px; background-color: var(--cal-header-bg);
            border-radius: 6px 6px 0 0; margin: -15px -15px 10px -15px; position: relative; /* Adjust negative margins based on padding */
        }
        @media (min-width: 600px) { .calendar-header { padding: 12px 15px; margin: -20px -20px 15px -20px; } }

        /* Override gradient text for calendar header H3 */
        .calendar-header h3#cal-month-year {
            margin: 0; font-size: 1.3em; font-weight: bold; text-align: center; flex-grow: 1;
            /* Reset gradient styles */
            background: none !important;
            -webkit-background-clip: initial !important;
            background-clip: initial !important;
            color: var(--cal-text-color) !important;
            -webkit-text-fill-color: initial !important;
            animation: none !important;
        }
        @media (min-width: 600px) { .calendar-header h3#cal-month-year { font-size: 1.5em; } }

        .cal-nav-btn, .cal-today-btn {
            border: none; border-radius: 5px; padding: 6px 12px; font-size: 1em; font-weight: bold;
            cursor: pointer; transition: background-color 0.2s ease; line-height: 1; color: var(--cal-button-text);
        }
        .cal-nav-btn { background-color: var(--cal-button-bg); }
        .cal-nav-btn:hover { background-color: var(--cal-button-hover-bg); }
        .cal-today-btn { background-color: var(--cal-today-button-bg); margin-left: 10px; }
        .cal-today-btn:hover { background-color: var(--cal-today-button-hover-bg); }

        /* Responsive positioning for 'Today' button */
        @media (max-width: 480px) {
            .cal-today-btn { position: absolute; bottom: -45px; right: 5px; margin-left: 0; }
            .calendar-header { padding-bottom: 5px; } /* Ensure content isn't cut off */
            #start-day-controls { margin-bottom: 45px; } /* Make space for absolute positioned button */
            .calendar-weekdays { margin-top: 45px; } /* Adjust space if needed */
        }

        #start-day-controls {
            text-align: center;
            margin-bottom: 10px;
            margin-top: 0px;
            display: flex;
            justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap;
            padding: 5px 15px 10px 15px; border-bottom: 1px solid var(--cal-border-color);
            margin-left: -15px; margin-right: -15px; /* Align with container padding */
        }
        @media (min-width: 600px) {
            #start-day-controls { margin-left: -20px; margin-right: -20px; padding-left: 20px; padding-right: 20px; }
        }

        .start-day-label { font-size: 0.9em; color: var(--cal-text-color); margin-right: 5px; }

        .cal-start-day-btn {
            background-color: #3a3a3a; color: #cccccc; border: 1px solid #555;
            padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 0.85em;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        .cal-start-day-btn:hover { background-color: #4a4a4a; border-color: #777; }
        .cal-start-day-btn.active {
            background-color: var(--cal-primary-color); color: var(--cal-button-text);
            border-color: var(--cal-primary-color); font-weight: bold;
        }

        /* Weekday Header Styles */
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            padding-bottom: 8px;
            margin-bottom: 8px;
            border-bottom: 1px solid var(--cal-border-color);
            margin-left: -15px; margin-right: -15px; /* Align with container padding */
            padding-left: 15px; padding-right: 15px; /* Inner padding for content */
        }
        @media (min-width: 600px) {
            .calendar-weekdays {
                margin-left: -20px;
                margin-right: -20px;
                padding-left: 20px;
                padding-right: 20px;
            }
        }

        .weekday-header {
            text-align: center;
            font-weight: bold;
            font-size: 0.85em;
            color: var(--cal-dim-text-color);
            padding: 4px 0;
            text-transform: uppercase;
        }
        @media (min-width: 600px) {
            .weekday-header {
                font-size: 0.9em;
            }
        }


        .calendar-body {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        /* Calendar Day Cell Styles */
        .calendar-day {
            background-color: var(--cal-header-bg); border: 1px solid var(--cal-border-color);
            border-radius: 4px; padding: 5px; min-height: 75px; display: flex;
            flex-direction: column; align-items: center; justify-content: flex-start; /* Align content to top */
            font-size: 0.85em; cursor: default; transition: background-color 0.2s ease;
            overflow: hidden; position: relative; text-align: center;
        }
        @media (min-width: 600px){ .calendar-day { min-height: 85px; font-size: 0.9em; padding: 8px 5px; } }

        /* Link inside calendar day */
        .calendar-day a {
            color: inherit; /* Inherit text color from parent */
            text-decoration: none; /* Remove underline from link */
            display: flex;
            flex-direction: column; /* Stack elements vertically */
            align-items: center;    /* Center horizontally */
            justify-content: flex-start; /* Align to top */
            height: 100%; /* Fill the cell */
            width: 100%;
            padding: inherit; /* Use padding from parent .calendar-day (applied effectively via box-sizing) */
            box-sizing: border-box; /* Include padding in width/height */
        }
        .calendar-day a:hover {
            color: inherit; /* Keep color consistent on hover, rely on parent hover effect */
        }


        .calendar-day:hover { background-color: #303034; } /* Hover effect for the cell */

        /* Styles for days not in the current month */
        .calendar-day.other-month { background-color: transparent; border-color: transparent; cursor: default; }
        .calendar-day.other-month .day-number { color: var(--cal-dim-text-color); opacity: 0.6; }
        .calendar-day.other-month .event-location,
        .calendar-day.other-month .daily-event-num { display: none; } /* Hide event details */
        .calendar-day.other-month:hover { background-color: transparent; } /* No hover effect */

        /* Style for today's date */
        .calendar-day.today { border: 2px solid var(--cal-today-border); background-color: #2a2a30; }
        .calendar-day.today .day-number { font-weight: bold; color: var(--cal-primary-color); }

        /* Style for the Day Number (Top) */
        .calendar-day .day-number {
            font-size: 1.1em; /* Relatively large */
            color: var(--cal-text-color);
            margin-top: 0px;    /* Position at the very top */
            margin-bottom: 2px; /* Small space below */
            line-height: 1.1;
            display: block;     /* Ensure it takes its own line */
        }

        /* Style for the Ordinal Event Number (Middle) */
        .calendar-day .daily-event-num {
            font-size: 0.8em;  /* Smaller than day number */
            color: var(--cal-event-num-color); /* Dimmer color */
            margin-top: 1px;    /* Small space above */
            margin-bottom: 1px; /* Small space below */
            line-height: 1;
            font-weight: normal;
            opacity: 0.9;
            display: block;     /* Ensure it takes its own line */
        }

        /* Style for the Event Location (Bottom) */
        .calendar-day .event-location {
            font-size: 0.9em;   /* Medium size */
            color: var(--cal-event-color); /* Brighter event color */
            font-weight: bold;
            margin-top: 1px;    /* Small space above */
            margin-bottom: 0px; /* No extra space at the bottom */
            line-height: 1;
            word-break: break-word; /* Prevent long locations from overflowing */
            display: block;     /* Ensure it takes its own line */
            max-width: 100%; /* Ensure it doesn't overflow horizontally */
        }


        /* --- Countdown Container Styles (Shared) --- */
        #countdown-container, #closing-countdown-container, #happening-now-container {
            background-color: var(--cal-bg-color); border: 1px solid var(--cal-border-color);
            border-radius: 8px; padding: 12px 15px;
            margin-top: 15px; /* Spacing after calendar or previous timer */
            margin-bottom: 10px; /* Default bottom margin */
            text-align: center; font-size: 1.1em; color: var(--cal-text-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        /* Specific margin for the last timer before the H2 */
        /* Apply to closing container OR happening now container if it's visible instead */
        #closing-countdown-container,
        #happening-now-container[style*="display: block"] ~ #closing-countdown-container, /* If happening now is visible, apply margin to closing */
        #happening-now-container:not([style*="display: none"]) { /* If happening now is visible and closing is hidden (shouldn't happen with current JS) */
             margin-bottom: 30px; /* More space before the "MORE ABOUT DAILY VRCHAT" heading */
        }
        /* Ensure default margin if happening now is hidden and closing is shown */
         #happening-now-container[style*="display: none"] ~ #closing-countdown-container {
             margin-bottom: 10px; /* Default bottom margin */
         }


        /* Larger screens */
        @media (min-width: 600px) {
             #countdown-container, #closing-countdown-container, #happening-now-container {
                 padding: 15px 20px;
                 font-size: 1.2em;
            }
        }

        /* Specific Timer Text Styles */
        #countdown-timer { color: var(--cal-secondary-color); font-weight: bold; }
        #countdown-day-label { color: var(--cal-primary-color); font-weight: bold; }
        #closing-countdown-timer { color: var(--cal-primary-color); font-weight: bold; }
        #closing-countdown-day-label { color: var(--cal-primary-color); font-weight: bold; }
        #happening-now-message { color: var(--cal-secondary-color); font-weight: bold; }
        #happening-now-link { color: var(--cal-primary-color); font-weight: bold; text-decoration: underline; }
        #happening-now-link:hover { color: #ff4fa4; } /* Hover color for the link */


        /* Responsive Label/Timer Layout */
        @media (max-width: 480px) {
             /* Make labels stack above timers on small screens */
             .countdown-label, #closing-countdown-label, #happening-now-message { display: block; margin-bottom: 3px; }
             #countdown-timer, #closing-countdown-timer, #happening-now-link { display: block; margin-left: 0; min-width: auto; margin-top: 5px;}
             #happening-now-link { margin-top: 8px; } /* Specific spacing for the link */
        }
        @media (min-width: 480px) {
             /* Keep labels inline with timers on larger screens */
             .countdown-label, #closing-countdown-label, #happening-now-message { display: inline; margin-bottom: 0; }
             #countdown-timer, #closing-countdown-timer, #happening-now-link { display: inline-block; margin-left: 8px; min-width: 150px; }
             #happening-now-link { margin-top: 0; }
        }

        /* ========================================= */
        /* == END CALENDAR STYLES ================== */
        /* ========================================= */

         /* --- END OF PROVIDED style.css CONTENT --- */
    </style>
</head>
<body>
<div class="container">
    <h1>FISH <span aria-hidden="true">＜＞＜</span> COMMUNITY</h1>
    <p> Structured chaos community ecosystem is made out of multiple communities, each with its own leadership and rules. All communities work together and follow the same principles.</p>

    <div class="video-container">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/plQ24noJR3w?si=oQm9TDtJhSec733t" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>

    <!-- === START MOVED CALENDAR SECTION === -->
    <hr>
    <section aria-labelledby="daily-event-heading">
        <!-- START: VRChat Calendar -->
        <div class="calendar-container">
            <div class="calendar-header">
                <button id="cal-prev-month" class="cal-nav-btn" title="Previous Month"><</button>
                <h3 id="cal-month-year">Month Year</h3>
                <button id="cal-next-month" class="cal-nav-btn" title="Next Month">></button>
                <button id="cal-goto-today" class="cal-today-btn" title="Go to Today">Today</button>
            </div>
            <div id="start-day-controls">
                <span class="start-day-label">Week Starts On:</span>
                <button id="cal-start-sun" class="cal-start-day-btn" data-day="0">Sunday</button>
                <button id="cal-start-mon" class="cal-start-day-btn" data-day="1">Monday</button>
            </div>
            <div class="calendar-weekdays" id="calendar-weekdays"></div>
            <div class="calendar-body" id="calendar-grid"></div>
        </div>
        <!-- END: VRChat Calendar -->

        <!-- Timers -->
        <div id="countdown-container">
            <span class="countdown-label">Next Daily VRChat (<span id="countdown-day-label">---</span>) starts at 21:00 UTC in:</span>
            <span id="countdown-timer">Calculating...</span>
        </div>
        <div id="closing-countdown-container">
            <span id="closing-countdown-label">Daily VRChat (<span id="closing-countdown-day-label">---</span>) instance closes at 23:00 UTC in:</span>
            <span id="closing-countdown-timer">Calculating...</span>
        </div>
        <p>Join the fish community's daily VRChat event! Just click the day on the calander and join the instance.</p>
        <p>Moderators will close the instance when the event is over. You're welcome to join the instances before the official start time.</p>
        <div id="happening-now-container" style="display: none;">
            <span id="happening-now-message"></span><br>
            <a id="happening-now-link" href="#" target="_blank" rel="noopener noreferrer">Click here to join the instance</a>
        </div>

        <!-- Daily VRChat Details -->
        <h2 id="daily-event-heading">MORE ABOUT DAILY VRCHAT</h2>
        <img src="images/daily_vrchat.png" alt="Daily VRChat Fish Logo" class="community-image" loading="lazy">
        <p>Public event that lets people freely express themselves without many restrictions. People are given the freedom to be as chaotic, offensive, and loud as they wish to be.</p>
        <p>The main objective of <b>DAILY VRCHAT</b> is to maintain a public <b><span aria-hidden="true">＜＞＜</span></b> group instance for <b>2 hours</b>, inviting anyone from the internet to join (<a href="https://vrc.group/FISH.9566" target="_blank" rel="noopener noreferrer">https://vrc.group/FISH.9566</a>).</p>
        <p>After the event, everyone will be kicked from the instance</p>
        <h3>THERE ARE 2 RULES!</h3>
        <ul>
            <li>1) NSFW avatars are not allowed.</li>
            <li>2) Crasher avatars are not allowed.</li>
        </ul>
        <p>If you break these rules you will be kicked or banned from joining <b>DAILY VRCHAT</b></p>
        <p>Check the Discord Events channel for more details. A link to the world instance will be posted to #🔥instance-link at the start of the event. (Discord accessible via <a href="http://theziver.com" target="_blank" rel="noopener noreferrer">theziver.com</a>)</p>
        <h3>WARNING!</h3>
        <p class="warning">This daily event is not your safe space. Moderators won't assist you with any hateful, racist, or homophobic behavior. And will only enforce 2 rules, If you get easily emotionally distressed <b>DO NOT GO TO THIS EVENT</b></p>
        <p>VRChat's Terms of Service and Guidelines still apply, and violations could result in your account being banned.</p>
    </section>
    <!-- === END MOVED CALENDAR SECTION === -->

    <hr>

    <section aria-labelledby="meaning-heading">
        <h2 id="meaning-heading">MEANING OF FISH <span aria-hidden="true">＜＞＜</span></h2>
        <img src="images/meaning_of_fish.png" alt="Image explaining the meaning of FISH ＜＞＜" class="meaning-image" loading="lazy">
         <ul id="meaning-explanation-list" style="padding-left: 20px; list-style: none;">
             <li id="meaning-explanation-loading"><i>Loading meaning details...</i></li>
         </ul>
         <p id="meaning-summary"><i>Loading summary...</i></p>
    </section>

    <hr>

    <section aria-labelledby="principles-heading">
        <h2 id="principles-heading">COMMUNITY PRINCIPLES</h2>
         <ol id="principles-list">
            <li id="principles-loading-message"><i>Loading principles...</i></li>
         </ol>
         <p id="principles-additional-note"><i>Loading additional note...</i></p>
    </section>

    <hr>

    <section class="fish-verified-theme" aria-labelledby="verified-heading">
        <h2 id="verified-heading">FISH VERIFIED<span aria-hidden="true">＜＞＜</span></h2>
        <img src="images/fish_verified.png" alt="Fish Verified Logo" class="verified-image" loading="lazy">
        <p>The FISH VERIFIED verifies communities for the FISH <span aria-hidden="true">＜＞＜</span> COMMUNITY. If a community is fish verified the owner of the verified community will be inside this vrchat group (<a href="https://vrc.group/FISHVE.7823" target="_blank" rel="noopener noreferrer">FISHVE.7823</a>) and will also have the FISH-VERIFIED role on the <span aria-hidden="true">＜＞＜</span> discord server.</p>
        <h3>Criteria for Verification</h3>
        <!-- Static content remains -->
        <ol>
            <li>Your community should contribute significantly to the <span aria-hidden="true">＜＞＜</span> community.</li>
            <li>The community must be managed by a capable person.</li>
            <li>The community must be safe for work (SFW)</li>
            <li>The community should have a clear idea behind it and be active.</li>
        </ol>
        <p>If you believe your community could be fish verified, contact TheZiver on <span aria-hidden="true">＜＞＜</span> discord server at <a href="http://theziver.com" target="_blank" rel="noopener noreferrer">theziver.com</a></p>
        <h3>Benefits of Verification</h3>
        <!-- Static content remains -->
        <ul>
            <li>Full support from the <span aria-hidden="true">＜＞＜</span> community</li>
            <li>Dedicated text channel on the <span aria-hidden="true">＜＞＜</span> discord server</li>
            <li>Asset for displaying group member count in your vrchat world</li>
            <li>Daily vrchat starter pack access, chance to build your own daily vrchat world</li>
            <li>Owner of fish-verified community receives NOCLIP in all DAILY VRCHAT worlds</li>
        </ul>
        <h3>LIST OF FISH VERIFIED COMMUNITIES</h3>
        <ul id="fish-verified-list">
            <li id="verified-loading-message"><i>Loading verified communities...</i></li>
        </ul>
     </section>

    <hr>

    <section class="fish-certified-theme" aria-labelledby="certified-heading">
        <h2 id="certified-heading">FISH CERTIFIED COMMUNITIES <span aria-hidden="true">＜＞＜</span></h2>
        <img src="images/fish_certified.png" alt="Fish Certified Logo" class="verified-image" style="filter: grayscale(80%);" loading="lazy">
        <p><i>Details about FISH CERTIFIED coming soon. Certified communities are part of the ecosystem but may have different focuses or origins compared to Verified ones.</i></p>
        <h3>LIST OF FISH CERTIFIED COMMUNITIES</h3>
        <ul id="fish-certified-list">
            <li id="certified-loading-message"><i>Loading certified communities...</i></li>
        </ul>
    </section>

    <hr>

    <section class="rose-fish-theme" aria-labelledby="rose-heading">
        <h2 id="rose-heading">ROSE FISH<span aria-hidden="true">＜＞＜</span></h2>
        <img src="images/rose_fish_spin.gif" alt="Spinning Rose Fish Logo" class="verified-image" loading="lazy">
        <!-- Static content remains -->
        <p><b>DATABASE:</b> <a href="http://rosefish.theziver.com" target="_blank" rel="noopener noreferrer">rosefish.theziver.com</a></p>
        <p>Content creation community that makes content for the FISH <span aria-hidden="true">＜＞＜</span> COMMUNITY. When someone joins rose fish, they get access to exclusive things.</p>
        <h3>Joining ROSE FISH</h3>
        <p>To join rose fish you need to make a contribution that requires human effort to create and could be easily used by the fish community members. For example:</p>
        <ul>
            <li>Public VRChat avatar/world</li><li>3D model</li><li>Script, Code, Utility, Addon, Tool</li><li>Shaders</li><li>Videos/Animations</li><li>Music, Sound Effects (only youtube or google drive links allowed)</li><li>Drawings</li><li>Other content related to <span aria-hidden="true">＜＞＜</span> that requires effort to create.</li>
        </ul>
        <p>If you believe you have made a significant contribution, you can submit it on <span aria-hidden="true">＜＞＜</span> discord server at <a href="http://theziver.com" target="_blank" rel="noopener noreferrer">theziver.com</a></p>
        <p>After submitting a contribution, all the rose fish members will participate in a voting process on discord. To receive a rose fish invitation, the contribution must receive a "YES" vote from over 60％ of the rose fish members.</p>
        <p>We have an avatar world called: "ROSE <span aria-hidden="true">＜＞＜</span> AVATARS" where we distribute our public avatars.</p>
        <p>Please make your contributions presentable and concise and free from any NSFW content. <span aria-hidden="true">＜＞＜</span></p>
        <h3>ROSE FISH AVATAR GUIDELINES</h3>
        <ol>
            <li><b>AVATAR CONTEXT</b>: Avatar context matters, avatars designed with the intention of being sexual, offensive, or malicious are not allowed.</li>
            <li><b>CLOTHING</b>: Avatars can wear skimpy clothing, but it must be used in a non-sexual manner.</li>
            <li><b>GORE</b>: Avatars that show realistic violence or gore are not allowed.</li>
            <li><b>PARODY COMEDY</b>: Avatars that are loud, disruptive, or malicious are allowed if they're created for comedic purposes. This includes avatars with bright colors, flashing images, and performance-heavy shaders.</li>
            <li><b>COPYRIGHT RESPONSIBILITY</b>: By submitting an avatar, users accept the risk of a DMCA strike if they violate intellectual property rights.</li>
        </ol>
    </section>

    <!-- Moved Fish Community Worlds Section -->
    <hr>
    <section class="generic-data-theme" aria-labelledby="worlds-heading">
        <h2 id="worlds-heading">FISH COMMUNITY WORLDS <span aria-hidden="true">＜＞＜</span></h2>
        <ul id="fish-worlds-list">
            <li id="worlds-loading-message"><i>Loading community worlds...</i></li>
        </ul>
    </section>

    <!-- Moved Fish Community Avatars Section -->
    <hr>
    <section class="generic-data-theme" aria-labelledby="avatars-heading">
        <h2 id="avatars-heading">FISH COMMUNITY AVATARS <span aria-hidden="true">＜＞＜</span></h2>
        <ul id="fish-avatars-list">
            <li id="avatars-loading-message"><i>Loading community avatars...</i></li>
        </ul>
    </section>

    <!-- Moved Luxury Trash Store Section -->
    <hr>
    <section class="luxury-trash-theme" aria-labelledby="luxury-heading">
        <h2 id="luxury-heading">LUXURY TRASH STORE</h2>
        <img src="images/luxury_trash.png" alt="Luxury Trash Golden Fish Logo" class="verified-image" loading="lazy">
        <!-- Static content remains -->
        <p><i>"Success and money are important, but they shouldn't limit your creativity. Use them as tools for growth, not as the final goal."</i></p>
        <ul>
            <li><b>LUXURY EGG</b> - ¥ 111<br><a href="https://theziver.booth.pm/items/3780803" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/3780803</a></li>
            <li><b>LUXURY FISH</b> - ¥ 0<br><a href="https://theziver.booth.pm/items/4131078" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/4131078</a></li>
            <li><b>LUXURY STAR</b> - ¥ 111<br><a href="https://theziver.booth.pm/items/4234569" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/4234569</a></li>
            <li><b>LUXURY PRE-CRACKED EGG</b> - ¥ 222<br><a href="https://theziver.booth.pm/items/4678138" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/4678138</a></li>
             <li><b>LUXURY PIPE</b> - ¥ 222<br><a href="https://theziver.booth.pm/items/4993637" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/4993637</a></li>
            <li><b>FISH HAIRCLIP</b> - ¥ 0<br><a href="https://theziver.booth.pm/items/5106312" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/5106312</a></li>
            <li><b>FISHING FLAG (AVATAR PREFAB)</b> - ¥ 777<br><a href="https://theziver.booth.pm/items/5399404" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/5399404</a></li>
            <li><b>LUXURY CUBE</b> - ¥ 1337<br><a href="https://theziver.booth.pm/items/5980910" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/5980910</a></li>
            <li><b>LUXURY TURRET (WORLD PREFAB)</b> - ¥ 999<br><a href="https://theziver.booth.pm/items/6610771" target="_blank" rel="noopener noreferrer">https://theziver.booth.pm/items/6610771</a></li>
        </ul>
    </section>


    <div class="fish-animation" aria-hidden="true">
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
        <span class="fish-symbol"><</span><span class="fish-symbol">></span><span class="fish-symbol"><</span>
    </div>
</div>

<script>
    // --- START OF PROVIDED JavaScript CONTENT (with modifications) ---
document.addEventListener('DOMContentLoaded', function() {

    // --- Calendar Elements ---
    const calendarGrid = document.getElementById('calendar-grid');
    const monthYearDisplay = document.getElementById('cal-month-year');
    const prevMonthButton = document.getElementById('cal-prev-month');
    const nextMonthButton = document.getElementById('cal-next-month');
    const gotoTodayButton = document.getElementById('cal-goto-today');
    const weekdaysContainer = document.getElementById('calendar-weekdays');
    const startSunButton = document.getElementById('cal-start-sun');
    const startMonButton = document.getElementById('cal-start-mon');

    // --- Timer Elements ---
    const countdownContainer = document.getElementById('countdown-container');
    const countdownTimerDisplay = document.getElementById('countdown-timer');
    const countdownDayLabel = document.getElementById('countdown-day-label');

    const closingCountdownContainer = document.getElementById('closing-countdown-container');
    const closingCountdownTimerDisplay = document.getElementById('closing-countdown-timer');
    const closingCountdownDayLabel = document.getElementById('closing-countdown-day-label');

    const happeningNowContainer = document.getElementById('happening-now-container');
    const happeningNowMessage = document.getElementById('happening-now-message');
    const happeningNowLink = document.getElementById('happening-now-link');

     // --- Content Elements ---
     const principlesListElement = document.getElementById('principles-list');
     const principlesNoteElement = document.getElementById('principles-additional-note');
     const meaningExplanationList = document.getElementById('meaning-explanation-list');
     const meaningSummaryElement = document.getElementById('meaning-summary');
     const verifiedListElement = document.getElementById('fish-verified-list');
     const certifiedListElement = document.getElementById('fish-certified-list');
     const worldsListElement = document.getElementById('fish-worlds-list'); // Added
     const avatarsListElement = document.getElementById('fish-avatars-list'); // Added

    // --- URL for Data ---
    // Assuming the Gist URL contains data matching the provided JSON structure
    const GIST_DATA_URL = "https://gist.githubusercontent.com/TheZiver/13fc44e6b228346750401f7fbfc995ed/raw";


    // --- Constants and State ---
    const targetDate = new Date(Date.UTC(2023, 6, 20)); // July 20, 2023 UTC (Month is 0-indexed)
    const today = new Date();
    const todayUTC = new Date(Date.UTC(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate()));
    let currentMonth = today.getUTCMonth();
    let currentYear = today.getUTCFullYear();
    let startDayOfWeekSetting = 1; // Default: Monday (0=Sun, 1=Mon)

    // Load saved start day preference
    const savedStartDay = localStorage.getItem('calendarStartDay');
    if (savedStartDay && (savedStartDay === '0' || savedStartDay === '1')) {
        startDayOfWeekSetting = parseInt(savedStartDay, 10);
    }

    // --- Data Arrays ---
    const locations = [ "YES?", "LUXURY TRASH", "The Fishing Mall", "Retrocubic Nexus", "Cunks Coughing City", "YES?", "YES?" ]; // Index 0=Sunday, 1=Monday,...
    const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    // World IDs mapped to the day of the week (Index 0=Monday, ..., 6=Sunday)
    const WORLD_IDS = {
        0: "wrld_b0812b34-cd7c-44b8-9b29-4f921a9e4d5a",  // Monday
        1: "wrld_9806f25c-0644-4ed7-a3b9-404763bd7dbc",  // Tuesday
        2: "wrld_a1caec89-3313-42d3-977a-3f8ac819a5a9",  // Wednesday
        3: "wrld_94d6eb87-7246-4dd8-81c0-cb1f468f096a",  // Thursday
        4: "wrld_72b30439-62a0-4c0d-a0e6-b3eb7292d355",  // Friday
        5: "wrld_72b30439-62a0-4c0d-a0e6-b3eb7292d355",  // Saturday
        6: "wrld_72b30439-62a0-4c0d-a0e6-b3eb7292d355"   // Sunday
    };
    const VRC_GROUP_ID = "grp_2b910dc4-e984-4fd5-813c-877edcea29d2"; // Fish Group ID

    // Flags for error logging
    window.timerElementsChecked = false;
    window.timerElementsMissing = false;

    // --- Helper Functions ---

    function getOrdinalSuffix(num) {
         if (num === null || typeof num === 'undefined') return "";
         const n = Number(num);
         if (isNaN(n) || n < 0) return "";
        const j = n % 10, k = n % 100;
        if (j == 1 && k != 11) return "st";
        if (j == 2 && k != 12) return "nd";
        if (j == 3 && k != 13) return "rd";
        return "th";
    }

    function calculateDailyVrchatDay(date) {
         const normalizedDate = new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate()));
         if (normalizedDate < targetDate) return null; // Date is before the first event day
         const oneDay = 24 * 60 * 60 * 1000;
         // Calculate difference in days (0 for the first day, 1 for second, etc.)
         const dayDifference = Math.floor((normalizedDate - targetDate) / oneDay);
         return (dayDifference >= 0) ? dayDifference : null;
    }

    // --- Calendar Rendering Functions ---

    function renderCalendar(month, year) {
        // Check for essential calendar elements
        if (!calendarGrid || !monthYearDisplay || !weekdaysContainer) {
             console.error("Calendar base elements (grid, month/year display, or weekdays container) missing!");
             if(calendarGrid) calendarGrid.innerHTML = "<p class='error-message' style='text-align: center;'><i>Error loading calendar grid.</i></p>";
             return;
        }

        monthYearDisplay.textContent = `${monthNames[month]} ${year}`;

        // Render Weekday Headers
        weekdaysContainer.innerHTML = '';
        const weekdayNamesShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]; // Standard order
        let orderedWeekdays = [];

        if (startDayOfWeekSetting === 1) { // Monday start
            orderedWeekdays = weekdayNamesShort;
        } else { // Sunday start (0)
            orderedWeekdays = [...weekdayNamesShort.slice(6), ...weekdayNamesShort.slice(0, 6)]; // Rotate: Sun, Mon, Tue...
        }

        orderedWeekdays.forEach(dayName => {
            const weekdayCell = document.createElement('div');
            weekdayCell.classList.add('weekday-header');
            weekdayCell.textContent = dayName;
            weekdaysContainer.appendChild(weekdayCell);
        });

        // Render Calendar Grid
        calendarGrid.innerHTML = '';

        const firstDayOfMonth = new Date(Date.UTC(year, month, 1));
        const daysInMonth = new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
        const lastDayOfPrevMonth = new Date(Date.UTC(year, month, 0)).getUTCDate();
        const firstDayIndex = firstDayOfMonth.getUTCDay(); // 0=Sun, 1=Mon,...
        let startingDayOffset = (firstDayIndex - startDayOfWeekSetting + 7) % 7;

        // Previous month's days
        for (let i = 0; i < startingDayOffset; i++) {
            const day = lastDayOfPrevMonth - startingDayOffset + 1 + i;
            calendarGrid.appendChild(createDayCell(day, true));
        }

        // Current month's days
        for (let day = 1; day <= daysInMonth; day++) {
            const cellDate = new Date(Date.UTC(year, month, day));
            const isToday = (year === todayUTC.getUTCFullYear() && month === todayUTC.getUTCMonth() && day === todayUTC.getUTCDate());
            calendarGrid.appendChild(createDayCell(day, false, cellDate, isToday));
        }

        // Next month's days
        const totalCellsRendered = startingDayOffset + daysInMonth;
        const remainingCells = (7 - (totalCellsRendered % 7)) % 7; // Fill remaining grid cells
        for (let i = 0; i < remainingCells; i++) {
            calendarGrid.appendChild(createDayCell(i + 1, true));
        }
    }

    function createDayCell(dayNumber, isOtherMonth, cellDate = null, isToday = false) {
        const dayCell = document.createElement('div');
        dayCell.classList.add('calendar-day');

        const dayNumberSpan = document.createElement('span');
        dayNumberSpan.classList.add('day-number');
        dayNumberSpan.textContent = dayNumber;

        if (isOtherMonth) {
            dayCell.classList.add('other-month');
            dayCell.appendChild(dayNumberSpan);
        } else if (cellDate) {
            const dailyDay = calculateDailyVrchatDay(cellDate); // Get event number for this date

            if (dailyDay !== null) { // If it's a valid event day
                const suffix = getOrdinalSuffix(dailyDay);
                const instanceId = dailyDay; // Use event number as instance ID
                const dayOfWeekForWorld = (cellDate.getUTCDay() + 6) % 7; // Convert UTC day (Sun=0) to Mon=0..Sun=6 index for WORLD_IDS
                const worldId = WORLD_IDS[dayOfWeekForWorld];
                const dayOfWeekForLocation = cellDate.getUTCDay(); // Keep original UTC day for location array (Sun=0..Sat=6)
                const locationName = locations[dayOfWeekForLocation];

                // Construct VRChat launch link
                const baseUrl = "https://vrchat.com/home/launch?worldId=" + worldId + "&instanceId=";
                const instanceParams = `~group(${VRC_GROUP_ID})~groupAccessType(public)~region(eu)`; // Use const for Group ID
                const vrchatLink = baseUrl + instanceId + instanceParams;

                // Create link element to wrap content
                const dayLink = document.createElement('a');
                dayLink.href = vrchatLink;
                dayLink.target = "_blank";
                dayLink.rel = "noopener noreferrer";
                dayLink.title = `Join Daily VRChat #${dailyDay}${suffix}`;

                dayLink.appendChild(dayNumberSpan); // 1. Append Day number

                const eventNumSpan = document.createElement('span'); // 2. Append Event Number (Ordinal)
                eventNumSpan.classList.add('daily-event-num');
                eventNumSpan.textContent = `${dailyDay}${suffix}`;
                dayLink.appendChild(eventNumSpan);

                if (locationName) { // 3. Append Location (if defined)
                    const locationSpan = document.createElement('span');
                    locationSpan.classList.add('event-location');
                    locationSpan.textContent = locationName;
                    dayLink.appendChild(locationSpan);
                }

                dayCell.appendChild(dayLink); // Add the link containing the ordered elements

            } else {
                // Day is in current month but before the first event day
                dayCell.appendChild(dayNumberSpan);
            }

            // Highlight today's date
            if (isToday) {
                dayCell.classList.add('today');
            }
        } else {
             // Fallback (shouldn't happen with current logic)
             dayCell.appendChild(dayNumberSpan);
        }

        return dayCell;
    }

    // --- Combined Timer Update Function ---
    function updateEventTimers() {
        // Check if all required timer elements exist (log error only once)
        if (!window.timerElementsChecked) {
            if (!countdownContainer || !countdownTimerDisplay || !countdownDayLabel ||
                !closingCountdownContainer || !closingCountdownTimerDisplay || !closingCountdownDayLabel ||
                !happeningNowContainer || !happeningNowMessage || !happeningNowLink)
            {
                console.error("One or more timer display elements are missing! Timers will not function correctly.");
                 if(countdownContainer) countdownContainer.style.display = 'none';
                 if(closingCountdownContainer) closingCountdownContainer.style.display = 'none';
                 if(happeningNowContainer) happeningNowContainer.style.display = 'none';
                 window.timerElementsMissing = true; // Set flag indicating failure
            }
             window.timerElementsChecked = true; // Mark as checked
        }
        // If elements were missing on the first check, stop
        if (window.timerElementsMissing) return;

        try {
            const nowUTC = new Date();
            const nowUTCMillis = nowUTC.getTime();

            // --- Calculate and Update "Starts In" Countdown ---
            let nextStartUTC = new Date(Date.UTC(nowUTC.getUTCFullYear(), nowUTC.getUTCMonth(), nowUTC.getUTCDate(), 21, 0, 0, 0));
            if (nowUTCMillis >= nextStartUTC.getTime()) {
                nextStartUTC.setUTCDate(nextStartUTC.getUTCDate() + 1);
            }
            const diffToStart = nextStartUTC.getTime() - nowUTCMillis;
            const startDayNumber = calculateDailyVrchatDay(nextStartUTC);
            const startDaySuffix = getOrdinalSuffix(startDayNumber);
            countdownDayLabel.textContent = (startDayNumber !== null) ? `${startDayNumber}${startDaySuffix}` : "---";
            countdownTimerDisplay.textContent = formatTimeDifference(diffToStart);
            countdownContainer.style.display = 'block';


            // --- Calculate and Update "Closes In" Countdown ---
            let nextCloseUTC = new Date(Date.UTC(nowUTC.getUTCFullYear(), nowUTC.getUTCMonth(), nowUTC.getUTCDate(), 23, 0, 0, 0));
            if (nowUTCMillis >= nextCloseUTC.getTime()) {
                nextCloseUTC.setUTCDate(nextCloseUTC.getUTCDate() + 1);
            }
            const diffToClose = nextCloseUTC.getTime() - nowUTCMillis;
            let closeEventDayUTC = new Date(nextCloseUTC);
            closeEventDayUTC.setUTCHours(21, 0, 0, 0); // Set to event start time to calculate correct day number
            const closeDayNumber = calculateDailyVrchatDay(closeEventDayUTC);
            const closeDaySuffix = getOrdinalSuffix(closeDayNumber);
            closingCountdownDayLabel.textContent = (closeDayNumber !== null) ? `${closeDayNumber}${closeDaySuffix}` : "---";
            closingCountdownTimerDisplay.textContent = formatTimeDifference(diffToClose);
            closingCountdownContainer.style.display = 'block';


            // --- Determine "Happening Now" State ---
            const todayStartUTC = new Date(Date.UTC(nowUTC.getUTCFullYear(), nowUTC.getUTCMonth(), nowUTC.getUTCDate(), 21, 0, 0, 0));
            const todayCloseUTC = new Date(Date.UTC(nowUTC.getUTCFullYear(), nowUTC.getUTCMonth(), nowUTC.getUTCDate(), 23, 0, 0, 0));

            if (nowUTCMillis >= todayStartUTC.getTime() && nowUTCMillis < todayCloseUTC.getTime()) {
                const currentDayNumber = calculateDailyVrchatDay(todayStartUTC);
                const currentDaySuffix = getOrdinalSuffix(currentDayNumber);
                const instanceId = currentDayNumber;
                if (instanceId !== null) {
                     const dayOfWeekForWorld = (todayStartUTC.getUTCDay() + 6) % 7; // Mon=0..Sun=6
                     const worldId = WORLD_IDS[dayOfWeekForWorld];
                     const baseUrl = "https://vrchat.com/home/launch?worldId=" + worldId + "&instanceId=";
                     const instanceParams = `~group(${VRC_GROUP_ID})~groupAccessType(public)~region(eu)`;
                     const vrchatLink = baseUrl + instanceId + instanceParams;
                     happeningNowMessage.textContent = `DAILY VRCHAT (${currentDayNumber}${currentDaySuffix}) IS CURRENTLY HAPPENING`;
                     happeningNowLink.href = vrchatLink;
                     happeningNowContainer.style.display = 'block';
                } else {
                     happeningNowContainer.style.display = 'none';
                     console.error("Could not calculate instance ID during event window.");
                }
            } else {
                happeningNowContainer.style.display = 'none';
            }

        } catch (error) {
            console.error("Error in updateEventTimers:", error);
            displayErrorState("Error updating timers.");
        }
    }

    // --- Helper to format time difference ---
    function formatTimeDifference(differenceMillis) {
        if (differenceMillis <= 0) return "Now / Very Soon!";
        const totalSeconds = Math.max(0, Math.floor(differenceMillis / 1000));
        const days = Math.floor(totalSeconds / (60 * 60 * 24));
        const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / (60 * 60));
        const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);
        const seconds = totalSeconds % 60;
        let timeString = "";
        if (days > 0) { timeString += `${days}d `; }
        timeString += `${String(hours).padStart(2, '0')}h ${String(minutes).padStart(2, '0')}m ${String(seconds).padStart(2, '0')}s`;
        return timeString.trim();
    }

    // --- Helper to display errors ---
    function displayErrorState(message) {
         console.error(message);
         if (countdownContainer) {
             countdownContainer.style.display = 'block';
             if (countdownDayLabel) countdownDayLabel.textContent = "Err";
             if (countdownTimerDisplay) countdownTimerDisplay.textContent = "Error";
         }
         if (closingCountdownContainer) {
             closingCountdownContainer.style.display = 'block';
             if (closingCountdownDayLabel) closingCountdownDayLabel.textContent = "Err";
             if (closingCountdownTimerDisplay) closingCountdownTimerDisplay.textContent = "Error";
         }
         if (happeningNowContainer) happeningNowContainer.style.display = 'none';
    }

    // --- Calendar Navigation ---
    function goToPrevMonth() { currentMonth--; if (currentMonth < 0) { currentMonth = 11; currentYear--; } renderCalendar(currentMonth, currentYear); }
    function goToNextMonth() { currentMonth++; if (currentMonth > 11) { currentMonth = 0; currentYear++; } renderCalendar(currentMonth, currentYear); }
    function goToToday() { const now = new Date(); if (currentMonth !== now.getUTCMonth() || currentYear !== now.getUTCFullYear()) { currentMonth = now.getUTCMonth(); currentYear = now.getUTCFullYear(); renderCalendar(currentMonth, currentYear); } }

    // --- Start Day Setting ---
    function updateStartDaySelection(newStartDay) {
        if (startDayOfWeekSetting === newStartDay) return;
        startDayOfWeekSetting = newStartDay;
        localStorage.setItem('calendarStartDay', newStartDay.toString());
        if (startSunButton) startSunButton.classList.toggle('active', newStartDay === 0);
        if (startMonButton) startMonButton.classList.toggle('active', newStartDay === 1);
        renderCalendar(currentMonth, currentYear);
    }


    // --- Content Loading Functions (using fetched data) ---

    function loadMeaningAndPrinciples(jsonData) {
        try {
             // Load Principles
             if (principlesListElement && jsonData?.community_principles?.principles) {
                 principlesListElement.innerHTML = ''; // Clear loading message
                 jsonData.community_principles.principles.forEach(principle => {
                     const li = document.createElement('li');
                     li.innerHTML = `<b>${principle.title || 'Principle'}</b>: ${principle.description || 'No description.'}`;
                     principlesListElement.appendChild(li);
                 });
             } else {
                 console.warn("Principles list element or data missing.");
                 if(principlesListElement) principlesListElement.innerHTML = '<li class="error-message"><i>Could not load principles.</i></li>';
             }
             if (principlesNoteElement && jsonData?.community_principles?.additional_note) {
                 // Replace escaped symbols if necessary, but handle potential HTML injection
                 const noteText = jsonData.community_principles.additional_note;
                 principlesNoteElement.textContent = noteText; // Use textContent for safety
                 // If HTML rendering is required (like for ＜＞＜), use innerHTML carefully after sanitization if needed
                 // principlesNoteElement.innerHTML = noteText.replace(/＜＞＜/g, '<span aria-hidden="true">＜＞＜</span>');
             } else {
                  console.warn("Principles note element or data missing.");
                  if(principlesNoteElement) principlesNoteElement.textContent = ''; // Clear placeholder
             }

             // Load Meaning
             if (meaningExplanationList && jsonData?.meaning_of_fish?.explanation) {
                 meaningExplanationList.innerHTML = ''; // Clear loading message
                 jsonData.meaning_of_fish.explanation.forEach(item => {
                     const li = document.createElement('li');
                     // Safely handle symbols
                     const symbolText = (item.symbol === '<' || item.symbol === '＜') ? '<' : (item.symbol === '>' || item.symbol === '＞') ? '>' : (item.symbol || '?');
                     li.innerHTML = `<b style="font-size: 1.5em; display: inline-block; width: 20px;">${symbolText}</b> - ${item.meaning || 'No explanation.'}`;
                     meaningExplanationList.appendChild(li);
                 });
             } else {
                 console.warn("Meaning explanation list element or data missing.");
                 if(meaningExplanationList) meaningExplanationList.innerHTML = '<li class="error-message"><i>Could not load meaning details.</i></li>';
             }
             if (meaningSummaryElement && jsonData?.meaning_of_fish?.summary) {
                 meaningSummaryElement.innerHTML = `<b>Summary:</b> ${jsonData.meaning_of_fish.summary.replace(/＜＞＜/g, '<span aria-hidden="true">＜＞＜</span>')}`;
             } else {
                  console.warn("Meaning summary element or data missing.");
                  if(meaningSummaryElement) meaningSummaryElement.innerHTML = '<i>Summary not available.</i>'; // Changed placeholder
             }
        } catch (error) {
            console.error("Error loading meaning and principles:", error);
            if(principlesListElement) principlesListElement.innerHTML = '<li class="error-message"><i>Error loading principles.</i></li>';
            if(meaningExplanationList) meaningExplanationList.innerHTML = '<li class="error-message"><i>Error loading meaning details.</i></li>';
            if(meaningSummaryElement) meaningSummaryElement.innerHTML = '<i class="error-message">Error loading summary.</i>';
        }
    }

    function loadFishGroups(jsonData) {
        // Get loading message elements to remove them later
        const verifiedLoadingMessage = document.getElementById('verified-loading-message');
        const certifiedLoadingMessage = document.getElementById('certified-loading-message');

        if (!verifiedListElement || !certifiedListElement) {
            console.error("Error: Verified or Certified list element not found.");
             // Clean up loading messages if lists don't exist
             if(verifiedLoadingMessage?.parentNode) verifiedLoadingMessage.parentNode.removeChild(verifiedLoadingMessage);
             if(certifiedLoadingMessage?.parentNode) certifiedLoadingMessage.parentNode.removeChild(certifiedLoadingMessage);
            return;
        }

        // Mapping from community name to logo filename (primarily for Verified)
        const communityLogos = {
             "CHEESE ＜＞＜": "cheese_fish.png",
             "VAPOR ＜＞＜": "vapor_fish.png",
             "GAMBLE ＜＞＜": "gamble_fish.png",
             "RAT ＜＞＜": "rat_fish.png",
             "The Rusk Shack": "rusk_shack.png",
             "AVIFAIR": "avifair.png",
             "Family Friendly Cult": "family_friendly_cult.png",
             "Portal Media": "portal_media.png"
             // Add certified communities here if they get logos
             // e.g., "GITHUB ＜＞＜": "github_fish.png" (if image exists)
        };

        try {
            if (!jsonData || typeof jsonData !== 'object' || !Array.isArray(jsonData.groups)) {
                 throw new Error("JSON data structure is invalid. Expected an object with a 'groups' array.");
            }
            const groups = jsonData.groups;

            // Clear loading messages before populating
            verifiedListElement.innerHTML = '';
            certifiedListElement.innerHTML = '';

            let verifiedCount = 0;
            let certifiedCount = 0;

            groups.forEach(community => {
                if (!community || typeof community.name !== 'string') {
                     console.warn("Skipping invalid community entry:", community);
                     return;
                }

                const listItem = document.createElement('li');
                const textDiv = document.createElement('div'); // Div to hold text content

                // Build text content HTML (safe handling of names)
                let textContentHTML = '';
                // Sanitize name before inserting as HTML, replace fish symbol for accessibility/display
                const communityName = community.name.replace(/</g, '<').replace(/>/g, '>').replace(/＜＞＜/g, '<span aria-hidden="true">＜＞＜</span>');
                textContentHTML += `<b>${communityName}</b>`;
                if (community.description) {
                     // Wrap description in a span for styling
                     textContentHTML += `<span>${community.description}</span>`; // Assuming description is safe text
                }
                if (community.owner_displayname) {
                    textContentHTML += `<span><b>Owner:</b> ${community.owner_displayname}</span>`; // Assuming owner name is safe text
                }
                const vrchatLink = community.links?.vrchat_group;
                const discordLink = community.links?.discord_server;
                if (vrchatLink && typeof vrchatLink === 'string' && vrchatLink.trim() !== '') {
                    // Basic URL validation might be needed here for security if links are user-generated
                    textContentHTML += `<a href="${vrchatLink.trim()}" target="_blank" rel="noopener noreferrer">VRChat Group</a>`;
                }
                if (discordLink && typeof discordLink === 'string' && discordLink.trim() !== '') {
                     // Basic URL validation might be needed here
                    textContentHTML += `<a href="${discordLink.trim()}" target="_blank" rel="noopener noreferrer">Discord Server</a>`;
                }
                textDiv.innerHTML = textContentHTML; // Set the inner HTML of the text div


                // Prepend logo if Verified and logo exists
                if (community.status === 'FISH_VERIFIED') {
                     const logoFilename = communityLogos[community.name]; // Check by original name
                     if (logoFilename) {
                         const img = document.createElement('img');
                         img.src = `images/${logoFilename}`; // Ensure images path is correct
                         img.alt = `${community.name} Logo`; // Use original name for alt text
                         img.classList.add('community-logo');
                         img.loading = 'lazy';
                         listItem.appendChild(img); // Logo first
                     }
                }
                // *** No logo logic for Certified here, matching CSS/request implication ***
                // If certified logos were added, logic would be similar to Verified.

                listItem.appendChild(textDiv); // Then text div

                // Append to the correct list
                if (community.status === 'FISH_VERIFIED') {
                     verifiedListElement.appendChild(listItem);
                     verifiedCount++;
                } else if (community.status === 'FISH_CERTIFIED') {
                     certifiedListElement.appendChild(listItem);
                     certifiedCount++;
                } else {
                     console.warn(`Community "${community.name}" has an unrecognized status: ${community.status}`);
                }
            });

            // Add "No communities" message if lists are empty after processing
            if (verifiedCount === 0) {
                verifiedListElement.innerHTML = '<li><i>No verified communities listed currently.</i></li>';
            }
            if (certifiedCount === 0) {
                certifiedListElement.innerHTML = '<li><i>No certified communities listed currently.</i></li>';
            }

        } catch (error) {
            console.error('Failed to process fish communities:', error);
            const errorMessage = `<li class="error-message"><i>Error loading communities. Details: ${error.message}.</i></li>`;
            // Ensure loading messages are removed even on error
            if (verifiedListElement) verifiedListElement.innerHTML = errorMessage; else if(verifiedLoadingMessage?.parentNode) verifiedLoadingMessage.parentNode.removeChild(verifiedLoadingMessage);
            if (certifiedListElement) certifiedListElement.innerHTML = errorMessage; else if(certifiedLoadingMessage?.parentNode) certifiedLoadingMessage.parentNode.removeChild(certifiedLoadingMessage);
        }
    }

     function loadFishAssets(assetTypeKey, listElement, jsonData) {
         const loadingMessageElement = listElement?.querySelector('li[id$="-loading-message"]'); // Find loading message by ID suffix

         if (!listElement) {
             console.error(`Error: List element for ${assetTypeKey} not found.`);
             return;
         }

         try {
             // Access the correct array in the JSON using the key (e.g., 'fish_community_worlds')
             const assetData = jsonData?.[assetTypeKey];

             if (!jsonData || !Array.isArray(assetData)) {
                 throw new Error(`JSON data structure is invalid or missing for '${assetTypeKey}'. Expected an array.`);
             }

             listElement.innerHTML = ''; // Clear loading message
             let assetCount = 0;

             assetData.forEach(asset => {
                 if (!asset || typeof asset !== 'object') {
                     console.warn(`Skipping invalid entry in ${assetTypeKey}:`, asset);
                     return;
                 }

                 const listItem = document.createElement('li');
                 let content = '';
                 let link = null;
                 let id = null;
                 let name = null;
                 let author = null;
                 let idKey = '';
                 let linkKey = '';
                 let nameKey = '';
                 let authorKey = 'author'; // Common key
                 let typeName = '';
                 let baseURL = '';

                 // Determine keys based on asset type
                 if (assetTypeKey === 'fish_community_worlds') {
                     idKey = 'world_id';
                     linkKey = 'world_link';
                     nameKey = 'world_name';
                     typeName = 'World';
                     baseURL = 'https://vrchat.com/home/world/';
                 } else if (assetTypeKey === 'fish_community_avatars') {
                     idKey = 'avatar_id';
                     linkKey = 'avatar_link';
                     nameKey = 'avatar_name';
                     typeName = 'Avatar';
                     baseURL = 'https://vrchat.com/home/avatar/';
                 } else {
                     console.warn(`Unknown asset type key: ${assetTypeKey}`);
                     return; // Skip unknown types
                 }

                 // Extract data using determined keys
                 id = asset[idKey];
                 link = asset[linkKey];
                 name = asset[nameKey];
                 author = asset[authorKey];

                 // Build content string
                 content = `<b>${name || id || `Unnamed ${typeName}`}</b>`; // Use ID as fallback name

                 // Display Author
                 if (author) {
                     content += ` by ${author}`; // Assuming author name is safe text
                 } else if (name || id) {
                     content += ` by <i>Unknown Author</i>`;
                 }

                 // Display ID (if different from name and exists)
                 if (id && id !== name) {
                     content += `<br><i>ID: ${id}</i>`;
                 }

                 // Display Link (prefer direct link, fallback to ID-based link)
                 if (link && typeof link === 'string' && link.trim() !== '') {
                     content += `<br><a href="${link.trim()}" target="_blank" rel="noopener noreferrer">View on VRChat</a>`;
                 } else if (id && baseURL) {
                     content += `<br><a href="${baseURL}${id}" target="_blank" rel="noopener noreferrer">View on VRChat (via ID)</a>`;
                 }

                 // Only add list item if there's meaningful content (name, id, or link)
                 if (name || id || link) {
                     listItem.innerHTML = content;
                     listElement.appendChild(listItem);
                     assetCount++;
                 } else {
                     console.warn(`Skipping empty asset entry in ${assetTypeKey}:`, asset);
                 }
             });

             // Add "No assets" message if list is empty after processing
             if (assetCount === 0) {
                  const assetPlural = assetTypeKey.includes('world') ? 'worlds' : 'avatars';
                  listElement.innerHTML = `<li><i>No community ${assetPlural} listed currently.</i></li>`;
             }

         } catch (error) {
             console.error(`Failed to process ${assetTypeKey}:`, error);
             const assetPlural = assetTypeKey.includes('world') ? 'worlds' : 'avatars';
             listElement.innerHTML = `<li class="error-message"><i>Error loading community ${assetPlural}. Details: ${error.message}.</i></li>`;
         } finally {
              // Ensure loading message is removed even on error after trying to populate
              // Re-check if loading message still exists before removing (innerHTML might have cleared it)
              if (loadingMessageElement && loadingMessageElement.parentNode === listElement) {
                  listElement.removeChild(loadingMessageElement);
              }
         }
     }


    // --- Event Listeners ---
    if (prevMonthButton) prevMonthButton.addEventListener('click', goToPrevMonth); else console.warn("Previous month button not found.");
    if (nextMonthButton) nextMonthButton.addEventListener('click', goToNextMonth); else console.warn("Next month button not found.");
    if (gotoTodayButton) gotoTodayButton.addEventListener('click', goToToday); else console.warn("Go to Today button not found.");
    if (startSunButton) startSunButton.addEventListener('click', () => updateStartDaySelection(0)); else console.warn("Start Sunday button not found.");
    if (startMonButton) startMonButton.addEventListener('click', () => updateStartDaySelection(1)); else console.warn("Start Monday button not found.");


    // --- Initial Setup & Data Fetch ---
    function initializePage() {
        // Check essential calendar elements first
        if (!calendarGrid || !monthYearDisplay || !startSunButton || !startMonButton || !weekdaysContainer) {
            console.error("One or more essential elements for calendar initialization are missing! Calendar will not render.");
            const container = document.querySelector('.container') || document.body;
            // Display error message more visibly if calendar fails init
            if (container && !document.getElementById('init-error-msg')) {
                const errorMsg = document.createElement('p'); errorMsg.id = 'init-error-msg'; errorMsg.classList.add('error-message'); errorMsg.style.fontWeight = 'bold'; errorMsg.style.textAlign = 'center'; errorMsg.style.marginTop = '20px';
                errorMsg.innerHTML = '<i>Error: Failed to initialize the calendar component.</i>';
                const calendarSection = document.querySelector('.calendar-container'); // Find calendar container
                if (calendarSection) calendarSection.parentNode.insertBefore(errorMsg, calendarSection); // Insert before calendar
                else container.insertBefore(errorMsg, container.firstChild); // Fallback
            }
            // Don't return necessarily, other parts might still load, but log the error
        } else {
             // Set initial calendar state only if elements exist
            startSunButton.classList.toggle('active', startDayOfWeekSetting === 0);
            startMonButton.classList.toggle('active', startDayOfWeekSetting === 1);
            renderCalendar(currentMonth, currentYear);
        }


        // Start timers (check for elements internally)
        updateEventTimers();
        setInterval(updateEventTimers, 1000);

        // Fetch data and then load dynamic content sections
        fetch(GIST_DATA_URL)
            .then(response => {
                if (!response.ok) {
                    // Try to get more info from the response body on error
                    return response.text().then(text => {
                         throw new Error(`HTTP error! Status: ${response.status} ${response.statusText}. Response: ${text.substring(0, 100)}...`);
                         });
                }
                return response.json();
            })
            .then(data => {
                // Call functions to populate sections with fetched data
                loadMeaningAndPrinciples(data);
                loadFishGroups(data); // Loads both Verified and Certified
                 // Load Worlds and Avatars, checking if elements exist
                 if (worldsListElement) loadFishAssets('fish_community_worlds', worldsListElement, data);
                 if (avatarsListElement) loadFishAssets('fish_community_avatars', avatarsListElement, data);
            })
            .catch(error => {
                console.error("Fatal Error: Could not fetch or process community data.", error);
                // Display a more prominent error message for critical data failure in relevant sections
                 const displayLoadError = (listEl, type) => {
                     if (listEl) {
                          // Clear potential loading message first
                          const loadingMsg = listEl.querySelector('li[id$="-loading-message"]');
                          if(loadingMsg) listEl.innerHTML = ''; // Clear only if loading message exists
                          else listEl.innerHTML = ''; // Clear anyway if no specific loading message found

                          // Add error message
                          const errorLi = document.createElement('li');
                          errorLi.classList.add('error-message');
                          errorLi.innerHTML = `<i>Critical Error: Could not load ${type} data. Please try refreshing. (${error.message})</i>`;
                          listEl.appendChild(errorLi);
                     }
                 }
                 // Show errors in all dynamic sections
                 displayLoadError(principlesListElement, "principles");
                 if(principlesNoteElement) principlesNoteElement.textContent = ''; // Clear note
                 displayLoadError(meaningExplanationList, "meaning");
                 if(meaningSummaryElement) meaningSummaryElement.innerHTML = '<i class="error-message">Error loading data.</i>';
                 displayLoadError(verifiedListElement, "verified communities");
                 displayLoadError(certifiedListElement, "certified communities");
                 displayLoadError(worldsListElement, "community worlds");
                 displayLoadError(avatarsListElement, "community avatars");
            });
    }

    initializePage(); // Run the initialization function

}); // End DOMContentLoaded wrapper

     // --- END OF PROVIDED JavaScript CONTENT ---
</script>

</body>
</html>